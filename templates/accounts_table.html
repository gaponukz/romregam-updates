{% macro initialAccountsTable(accounts, text) %}
    <script>
        const removeSecectionText = "{{text.remove_selection}}"
    </script>

    <input type="hidden" id="accounts" name="accounts" value="">

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="padding: 0px">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="padding-top: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; width: 100%;">
                        <div class="collapse navbar-collapse" id="navbarText">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                <li class="nav-item">&nbsp&nbsp</li>
                                <li class="nav-item">&nbsp&nbsp</li>
                                <li class="nav-item">
                                    <select id="filter" class="form-select form-select-sm" style="height: 28.5px;">
                                        <option value="profile_photo"> {{text.profile_photo_filter}} </option>
                                        <option value="usernames">{{text.usernames}}</option>
                                        <option value="untoched_more_then"> {{text.untouched_filter}} </option>
                                        <option value="proxy"> {{text.proxy_filter}} </option>
                                        <option value="status">{{text.status}}</option>
                                        <option value="bio"> {{text.bio_filter}} </option>
                                    </select>
                                </li>
                                <li class="nav-item">&nbsp&nbsp</li>
                                <li class="nav-item">
                                    <select id="profile_photo" class="form-select form-select-sm" style="height: 28.5px;">
                                        <option value="1">{{text.yes}}</option>
                                        <option value="0">{{text.no}}</option>
                                    </select>
                                    <select id="usernames" class="form-select form-select-sm" style="height: 28.5px; display: none">
                                        <option value="1">{{text.yes}}</option>
                                        <option value="0">{{text.no}}</option>
                                    </select>
                                    <select id="untoched_more_then" class="form-select form-select-sm" style="height: 28.5px; display: none">
                                        <option value="3">3 {{text.days}}</option>
                                        <option value="7">7 {{text.days}}</option>
                                        <option value="14">14 {{text.days}}</option>
                                    </select>
                                    <select id="proxy" class="form-select form-select-sm" style="height: 28.5px; display: none">
                                        <option value="1">{{text.yes}}</option>
                                        <option value="0">{{text.no}}</option>
                                    </select>
                                    <select id="status" class="form-select form-select-sm" style="height: 28.5px; display: none">
                                        <option value="no_limits">{{text.no_limits}}</option>
                                        <option value="banned">{{text.banned}}</option>
                                        <option value="spam_block">{{text.spam_block}}</option>
                                        <option value="not_connected">{{text.no_connect}}</option>
                                    </select>
                                    <select id="bio" class="form-select form-select-sm" style="height: 28.5px; display: none">
                                        <option value="1">{{text.yes}}</option>
                                        <option value="0">{{text.no}}</option>
                                    </select>
                                </li>
                                <li class="nav-item">&nbsp&nbsp</li>
                                <li class="nav-item"><button class="btn btn-success btn-sm" type="button" id="apply_filter" style="padding: 2px; background-color: #13CE8B">&nbsp {{text.apply}} &nbsp</button></li>
                                <li class="nav-item">&nbsp&nbsp</li>
                                <li class="nav-item"><button class="btn btn-danger btn-sm" type="button" id="reset_filter" style="padding: 2px">&nbsp {{text.reset_filter}} &nbsp</button></li>
                                <li class="nav-item">&nbsp&nbsp</li>
                            </ul>
                            <span class="navbar-text">
            <button type="button" class="btn btn-success btn-sm" style="padding: 2px; background-color: #13CE8B" data-bs-dismiss="modal" aria-label="Close">&nbsp {{text.select}} &nbsp</button> &nbsp
            <button type="button" class="btn btn-primary btn-sm" style="padding: 2px" id="select_all">&nbsp {{text.select_all}} &nbsp</button> &nbsp
            <button type="button" class="btn btn-outline-danger btn-sm" style="padding: 2px" data-bs-dismiss="modal" aria-label="Close">&nbsp&nbsp {{text.close}} &nbsp&nbsp </button>  &nbsp
            </span>
                        </div>
                    </nav>

                </div>
                <div class="modal-body" style="padding-top: 0px">
                    <nav class="navbar navbar-expand-lg navbar-light" style="padding-bottom: 1px; padding-top: 0px;">
                        <div class="collapse navbar-collapse" id="navbarText" style="padding-bottom: 1px; padding-top: 0px; height: 43px;">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="padding-bottom: 1px;margin-bottom: 1px">
                                <li class="nav-item">
                                    <div class="row g-3 align-items-center">
                                        <div class="col-auto">
                                            <label class="col-form-label">{{text.show}}</label>
                                        </div>
                                        <div class="col-auto">
                                            <input type="number" id="update_table" class="form-control" style="width: 55px !important; height: 30px !important;">
                                        </div>
                                        <div class="col-auto">
                                            <label class="col-form-label">{{text.accounts}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <span class="navbar-text">
                                <div class="input-group input-group-sm mb-3" style=" margin-top: 16px">
                                    <span class="input-group-text"><img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/000000/search.png"></span>
                                    <input type="text" id="search_table" class="form-control" style="width: 150px; height: 30px !important;">
                                </div>
                        </span>
                </div>
                </nav>
                <div style="position:relative;">
                    <div style="overflow:scroll;height:550px;overflow-x: hidden;" class="scroll_element">
                        <table class="table table-bordered table-sm" id="main_table">
                            <tbody>
                                <thead>
                                    <tr>
                                        <td>&nbsp&nbsp&nbsp&nbsp#&nbsp</td>
                                        <td style="text-align: center;">{{text.photo}}</td>
                                        <td style="text-align: center;">{{text.username}}</td>
                                        <td style="text-align: center;">{{text.name}}</td>
                                        <td style="text-align: center;">{{text.phone}}</td>
                                        <td style="text-align: center;">{{text.untouched}}</td>
                                        <td style="text-align: center;">{{text.proxy}}</td>
                                        <td style="text-align: center;">{{text.status}}</td>
                                    </tr>
                                </thead>
                                {%for account in accounts %}
                                <tr>
                                    <td>{{account.index}}</td>
                                    <td> {% if account.photo %} <img style="border-radius: 50%;" height="23" width="23" src="{{account.photo}}" /> {% endif %}</td>
                                    <td>{{account.username}}</td>
                                    <td>{{account.name}}</td>
                                    <td>{{account.phone}}</td>
                                    <td>{% if account.untouched %} {{account.untouched}} days {% endif %}</td>
                                    <td>{{account.proxy}}</td>
                                    <td>
                                        {% if account.is_busy %} <img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/F25081/hotel-door-hanger.png" data-bs-toggle="tooltip" data-bs-placement="left" title="Acc busy"> {% endif %}
                                        {% if account.status == "Dead" %} <img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/fa314a/bad-banana.png" data-bs-toggle="tooltip" data-bs-placement="left" title="Acc dead">                                                {% endif %} {% if account.status == "Spam block" %} <img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/fa314a/spam-can.png" data-bs-toggle="tooltip" data-bs-placement="left"
                                            title="Acc spam blocked"> {% endif %} {% if account.status == "Not connected" %} <img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/fa314a/cellular-network.png" data-bs-toggle="tooltip"
                                            data-bs-placement="left" title="Not connected"> {% endif %} {% if account.password %} <img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/4a90e2/key.png" data-bs-toggle="tooltip"
                                            data-bs-placement="left" title="Have 2-fa"> {% endif %} {% if account.bio %} <img width="20" height="20" src="https://img.icons8.com/fluency-systems-filled/48/4a90e2/magical-scroll.png" data-bs-toggle="tooltip"
                                            data-bs-placement="left" title="Have bio"> {% endif %}
                                    </td>
                                </tr>
                                {%endfor%}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        setInterval(() => {
            let currentTextContent = document.getElementById("show_accounts_counts").textContent
            let accountsCount = document.getElementById("accounts").value.split(" ").filter(item => item).length
            
            if (accountsCount != 0) {
                if (currentTextContent.includes("(")) {
                    currentTextContent = `${currentTextContent.split("(")[0]}(${accountsCount})`

                } else {
                    currentTextContent = `${currentTextContent}(${accountsCount})`
                }

                document.getElementById("show_accounts_counts").textContent = currentTextContent
            } else {
                document.getElementById("show_accounts_counts").textContent = currentTextContent.split("(")[0]
            }

        }, 500)
    </script>

{% endmacro %}